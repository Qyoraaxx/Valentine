<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For You</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,700;1,400&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">

<style>
body {
  min-height: 100vh;
  background: #0f0f0f;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Crimson Text', serif;
  overflow: hidden;
}

.handwritten { font-family: 'Dancing Script', cursive; }

.envelope {
  width: 420px;
  height: 300px;
  position: relative;
  perspective: 1200px;
}

.flap {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 50%;
  background: #f4f4f4;
  clip-path: polygon(0 0, 50% 100%, 100% 0);
  transform-origin: top;
  transition: transform 0.8s ease;
  z-index: 30;
}

.envelope.open .flap {
  transform: rotateX(180deg);
}

.letter {
  position: absolute;
  left: 5%;
  bottom: 0;
  width: 90%;
  height: 90%;
  background: #fcfaf7;
  border: 1px solid #e4e4e7;
  padding: 24px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
  transform: translateY(60%);
  transition: transform 0.8s ease;
  z-index: 10;
}

.envelope.open .letter {
  transform: translateY(-20%);
}

/* Lily decoration */
.lily {
  position: absolute;
  top: 14px;
  right: 18px;
  font-size: 22px;
  color: #b91c1c;
  opacity: 0.85;
}

/* Hearts */
.heart {
  position: absolute;
  animation: floatUp 2s ease-out forwards;
  font-size: 22px;
  pointer-events: none;
}

@keyframes floatUp {
  from { opacity: 1; transform: translateY(0) scale(1); }
  to { opacity: 0; transform: translateY(-120px) scale(1.8); }
}
</style>
</head>

<body>

<div class="text-center text-zinc-400 text-xs tracking-[0.4em] uppercase mb-4 absolute top-8">
  Tap to Open / Close
</div>

<!-- Audio (soft instrumental, no lyrics) -->
<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9d61a1c1a6.mp3" type="audio/mpeg">
</audio>

<div id="env" class="envelope cursor-pointer" onclick="toggleEnvelope()">

  <!-- LETTER -->
  <div class="letter">
    <div class="lily">⚜️</div>

    <h2 class="handwritten text-3xl text-zinc-800 mb-2">Dear Maricar,</h2>

    <p class="text-sm italic text-zinc-600 leading-relaxed mb-6">
      “I don’t question loving you.
      I choose you — every day, without hesitation.”
    </p>

    <div class="text-center my-6">
      <p class="text-xl font-bold text-red-900 italic uppercase tracking-widest">
        Will you be my Valentine?
      </p>
    </div>

    <!-- BUTTONS -->
    <div class="relative flex justify-center gap-4 h-14">
      <button onclick="yesAnswer(event)"
        class="px-6 py-2 border border-red-800 text-red-900 uppercase tracking-widest text-sm
               hover:bg-red-800 hover:text-white transition">
        Yes
      </button>

      <button id="noBtn"
        class="px-6 py-2 border border-zinc-400 text-zinc-500 uppercase tracking-widest text-sm
               absolute right-0 transition">
        No
      </button>
    </div>

    <div class="mt-6 flex justify-between items-end border-t border-red-100 pt-3">
      <div class="text-[10px] uppercase tracking-widest italic text-red-800/60">
        I choose you. Always.
      </div>
      <div class="text-right">
        <p class="text-[10px] text-zinc-400 uppercase tracking-widest">Yours,</p>
        <p class="handwritten text-2xl text-red-900">Nayla</p>
      </div>
    </div>
  </div>

  <!-- ENVELOPE BODY -->
  <div class="absolute inset-0 bg-white border border-zinc-200 shadow-xl z-0"></div>
  <div class="flap"></div>
</div>

<script>
const env = document.getElementById("env");
const noBtn = document.getElementById("noBtn");
const music = document.getElementById("bgMusic");
let openedOnce = false;

function toggleEnvelope() {
  env.classList.toggle("open");

  if (!openedOnce) {
    openedOnce = true;

    // Play music (iOS requires user interaction)
    music.volume = 0.35;
    music.play();

    // Gentle vibration (if supported)
    if (navigator.vibrate) {
      navigator.vibrate(40);
    }
  }
}

/* NO BUTTON DODGE */
noBtn.addEventListener("mouseover", moveNo);
noBtn.addEventListener("touchstart", moveNo);

function moveNo(e) {
  e.stopPropagation();
  const x = Math.random() * 160 - 80;
  const y = Math.random() * 80 - 40;
  noBtn.style.transform = `translate(${x}px, ${y}px)`;
}

/* YES = HEARTS */
function yesAnswer(e) {
  e.stopPropagation();
  for (let i = 0; i < 12; i++) {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = "❤";
    heart.style.left = e.clientX + (Math.random()*40 - 20) + "px";
    heart.style.top = e.clientY + (Math.random()*20 - 10) + "px";
    heart.style.color = ["#991b1b","#dc2626","#f43f5e"][Math.floor(Math.random()*3)];
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}
</script>

</body>
</html>
